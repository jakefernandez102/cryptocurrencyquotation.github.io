{"version":3,"sources":["app.js"],"names":["cryptoSelect","document","querySelector","monedaSelect","formulario","resultado","objBusqueda","moneda","cryptomoneda","obtenerCryptoMonedas","cryptoMonedas","Promise","resolve","consultarCryptoMonedas","fetch","then","respuesta","json","datos","Data","criptomonedas","selectCryptoMonedas","forEach","crypto","FullName","Name","CoinInfo","option","createElement","value","textContent","appendChild","leerValor","e","target","name","submitFormulario","preventDefault","consultarAPI","mostrarAlerta","mensaje","alerta","classList","add","setTimeout","remove","url","mostrarSpinner","mostrarCotizacionHTML","DISPLAY","cotizacion","limpiarHTML","PRICE","HIGHDAY","LOWDAY","CHANGEPCT24HOUR","LASTUPDATE","precio","innerHTML","precioAlto","precioBajo","ultimasHoras","ultimaActualizacion","firstChild","removeChild","spinner","addEventListener"],"mappings":"AAEA,MAAMA,aAAeC,SAASC,cAAe,kBACvCC,aAAeF,SAASC,cAAe,WACvCE,WAAaH,SAASC,cAAe,eACrCG,UAAYJ,SAASC,cAAe,cAEpCI,YAAc,CAChBC,OAAQ,GACRC,aAAc,IAGZC,qBAAyBC,GAAmB,IAAIC,SAASC,IAC3DA,EAASF,EAAe,IAa5B,SAASG,yBAGLC,MAFY,2EAGPC,MAAMC,GAAaA,EAAUC,SAC7BF,MAAMG,GAAST,qBAAsBS,EAAMC,QAC3CJ,MAAMK,GAAiBC,oBAAqBD,IACrD,CACA,SAASC,oBAAqBD,GAC1BA,EAAcE,SAASC,IACnB,MAAMC,SAAEA,EAAQC,KAAEA,GAASF,EAAOG,SAE5BC,EAAS1B,SAAS2B,cAAe,UACvCD,EAAOE,MAAQJ,EACfE,EAAOG,YAAcN,EACrBxB,aAAa+B,YAAaJ,EAAQ,GAE1C,CAEA,SAASK,UAAWC,GAEhB3B,YAAa2B,EAAEC,OAAOC,MAASF,EAAEC,OAAOL,KAE5C,CAEA,SAASO,iBAAkBH,GACvBA,EAAEI,iBAEF,MAAM9B,OAAEA,EAAMC,aAAEA,GAAiBF,YAEjB,KAAXC,GAAkC,KAAjBC,EAKtB8B,eAJIC,cAAe,gCAKvB,CAEA,SAASA,cAAeC,GAGpB,IAFoBvC,SAASC,cAAe,UAExB,CAChB,MAAMuC,EAASxC,SAAS2B,cAAe,OACvCa,EAAOC,UAAUC,IAAK,SAGtBF,EAAOX,YAAcU,EACrBpC,WAAW2B,YAAaU,GAExBG,YAAY,KACRH,EAAOI,QAAQ,GAChB,IACP,CAEJ,CAEA,SAASP,eACL,MAAM/B,OAAEA,EAAMC,aAAEA,GAAiBF,YAC3BwC,EAAM,+DAAgEtC,WAAwBD,IAEpGwC,iBAEAjC,MAAOgC,GACF/B,MAAMC,GAAaA,EAAUC,SAC7BF,MAAMG,GAAS8B,sBAAuB9B,EAAM+B,QAASzC,GAAgBD,KAC9E,CAEA,SAASyC,sBAAuBE,GAC5BC,cACA,MAAMC,MAAEA,EAAKC,QAAEA,EAAOC,OAAEA,EAAMC,gBAAEA,EAAeC,WAAEA,GAAeN,EAE1DO,EAASxD,SAAS2B,cAAe,KACvC6B,EAAOf,UAAUC,IAAK,UACtBc,EAAOC,UAAY,sBAAuBN,WAE1C,MAAMO,EAAa1D,SAAS2B,cAAe,KAC3C+B,EAAWD,UAAY,oCAAqCL,eAE5D,MAAMO,EAAa3D,SAAS2B,cAAe,KAC3CgC,EAAWF,UAAY,oCAAqCJ,eAE5D,MAAMO,EAAe5D,SAAS2B,cAAe,KAC7CiC,EAAaH,UAAY,oCAAqCH,gBAE9D,MAAMO,EAAsB7D,SAAS2B,cAAe,KACpDkC,EAAoBJ,UAAY,yCAA0CF,eAI1EnD,UAAU0B,YAAa0B,GACvBpD,UAAU0B,YAAa4B,GACvBtD,UAAU0B,YAAa6B,GACvBvD,UAAU0B,YAAa8B,GACvBxD,UAAU0B,YAAa+B,EAC3B,CAEA,SAASX,cACL,KAAQ9C,UAAU0D,YACd1D,UAAU2D,YAAa3D,UAAU0D,WAEzC,CAEA,SAAShB,iBAELI,cAEA,MAAMc,EAAUhE,SAAS2B,cAAe,OACxCqC,EAAQvB,UAAUC,IAAK,WAEvBsB,EAAQP,UAAY,wHAMpBrD,UAAU0B,YAAakC,EAC3B,CA7HAhE,SAASiE,iBAAkB,oBAAoB,KAC3CrD,yBAEAT,WAAW8D,iBAAkB,SAAU9B,kBAEvCpC,aAAakE,iBAAkB,SAAUlC,WACzC7B,aAAa+D,iBAAkB,SAAUlC,UAAW","file":"main.js","sourcesContent":["\r\n\r\nconst cryptoSelect = document.querySelector( '#criptomonedas' );\r\nconst monedaSelect = document.querySelector( '#moneda' );\r\nconst formulario = document.querySelector( '#formulario' );\r\nconst resultado = document.querySelector( '#resultado' );\r\n\r\nconst objBusqueda = {\r\n    moneda: '',\r\n    cryptomoneda: '',\r\n}\r\n\r\nconst obtenerCryptoMonedas = ( cryptoMonedas ) => new Promise( resolve => {\r\n    resolve( cryptoMonedas );\r\n} );\r\n\r\n\r\ndocument.addEventListener( 'DOMContentLoaded', () => {\r\n    consultarCryptoMonedas();\r\n\r\n    formulario.addEventListener( 'submit', submitFormulario );\r\n\r\n    cryptoSelect.addEventListener( 'change', leerValor );\r\n    monedaSelect.addEventListener( 'change', leerValor );\r\n} );\r\n\r\nfunction consultarCryptoMonedas() {\r\n    const url = `https://min-api.cryptocompare.com/data/top/mktcapfull?limit=10&tsym=USD`;\r\n\r\n    fetch( url )\r\n        .then( respuesta => respuesta.json() )\r\n        .then( datos => obtenerCryptoMonedas( datos.Data ) )\r\n        .then( criptomonedas => selectCryptoMonedas( criptomonedas ) );\r\n}\r\nfunction selectCryptoMonedas( criptomonedas ) {\r\n    criptomonedas.forEach( crypto => {\r\n        const { FullName, Name } = crypto.CoinInfo;\r\n\r\n        const option = document.createElement( 'OPTION' );\r\n        option.value = Name;\r\n        option.textContent = FullName;\r\n        cryptoSelect.appendChild( option );\r\n    } );\r\n}\r\n\r\nfunction leerValor( e ) {\r\n\r\n    objBusqueda[ e.target.name ] = e.target.value;\r\n\r\n}\r\n\r\nfunction submitFormulario( e ) {\r\n    e.preventDefault();\r\n    //validar\r\n    const { moneda, cryptomoneda } = objBusqueda;\r\n\r\n    if ( moneda === '' || cryptomoneda === '' ) {\r\n        mostrarAlerta( 'Ambos campos son obligatorios' );\r\n        return;\r\n    }\r\n    //consultar APO con los resultados. \r\n    consultarAPI();\r\n}\r\n\r\nfunction mostrarAlerta( mensaje ) {\r\n    const existeError = document.querySelector( '.error' );\r\n\r\n    if ( !existeError ) {\r\n        const alerta = document.createElement( 'DIV' );\r\n        alerta.classList.add( 'error' )\r\n\r\n        //mensaje de error\r\n        alerta.textContent = mensaje;\r\n        formulario.appendChild( alerta );\r\n\r\n        setTimeout( () => {\r\n            alerta.remove();\r\n        }, 3000 );\r\n    }\r\n\r\n}\r\n\r\nfunction consultarAPI() {\r\n    const { moneda, cryptomoneda } = objBusqueda;\r\n    const url = `https://min-api.cryptocompare.com/data/pricemultifull?fsyms=${ cryptomoneda }&tsyms=${ moneda }`;\r\n\r\n    mostrarSpinner();\r\n\r\n    fetch( url )\r\n        .then( respuesta => respuesta.json() )\r\n        .then( datos => mostrarCotizacionHTML( datos.DISPLAY[ cryptomoneda ][ moneda ] ) )\r\n}\r\n\r\nfunction mostrarCotizacionHTML( cotizacion ) {\r\n    limpiarHTML();\r\n    const { PRICE, HIGHDAY, LOWDAY, CHANGEPCT24HOUR, LASTUPDATE } = cotizacion;\r\n\r\n    const precio = document.createElement( 'P' );\r\n    precio.classList.add( 'precio' );\r\n    precio.innerHTML = `El pecio es: <span>${ PRICE }</span>`;\r\n\r\n    const precioAlto = document.createElement( 'P' );\r\n    precioAlto.innerHTML = `<p>Precio mas alto del dia:<span>${ HIGHDAY }<span/></p>`;\r\n\r\n    const precioBajo = document.createElement( 'P' );\r\n    precioBajo.innerHTML = `<p>Precio mas bajo del dia:<span>${ LOWDAY }<span/></p>`;\r\n\r\n    const ultimasHoras = document.createElement( 'P' );\r\n    ultimasHoras.innerHTML = `<p>Precio mas alto del dia:<span>${ CHANGEPCT24HOUR }%<span/></p>`;\r\n\r\n    const ultimaActualizacion = document.createElement( 'P' );\r\n    ultimaActualizacion.innerHTML = `<p>Ultima actualizacion del dia:<span>${ LASTUPDATE }<span/></p>`;\r\n\r\n\r\n\r\n    resultado.appendChild( precio );\r\n    resultado.appendChild( precioAlto );\r\n    resultado.appendChild( precioBajo );\r\n    resultado.appendChild( ultimasHoras );\r\n    resultado.appendChild( ultimaActualizacion );\r\n}\r\n\r\nfunction limpiarHTML() {\r\n    while ( resultado.firstChild ) {\r\n        resultado.removeChild( resultado.firstChild );\r\n    }\r\n}\r\n\r\nfunction mostrarSpinner() {\r\n\r\n    limpiarHTML();\r\n\r\n    const spinner = document.createElement( 'DIV' );\r\n    spinner.classList.add( 'spinner' );\r\n\r\n    spinner.innerHTML = `\r\n        <div class=\"bounce1\"></div>\r\n        <div class=\"bounce2\"></div>\r\n        <div class=\"bounce3\"></div>\r\n    `;\r\n\r\n    resultado.appendChild( spinner );\r\n}"]}