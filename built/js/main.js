const cryptoSelect=document.querySelector("#criptomonedas"),monedaSelect=document.querySelector("#moneda"),formulario=document.querySelector("#formulario"),resultado=document.querySelector("#resultado"),objBusqueda={moneda:"",cryptomoneda:""},obtenerCryptoMonedas=e=>new Promise((t=>{t(e)}));function consultarCryptoMonedas(){fetch("https://min-api.cryptocompare.com/data/top/mktcapfull?limit=10&tsym=USD").then((e=>e.json())).then((e=>obtenerCryptoMonedas(e.Data))).then((e=>selectCryptoMonedas(e)))}function selectCryptoMonedas(e){e.forEach((e=>{const{FullName:t,Name:o}=e.CoinInfo,n=document.createElement("OPTION");n.value=o,n.textContent=t,cryptoSelect.appendChild(n)}))}function leerValor(e){objBusqueda[e.target.name]=e.target.value}function submitFormulario(e){e.preventDefault();const{moneda:t,cryptomoneda:o}=objBusqueda;""!==t&&""!==o?consultarAPI():mostrarAlerta("Ambos campos son obligatorios")}function mostrarAlerta(e){if(!document.querySelector(".error")){const t=document.createElement("DIV");t.classList.add("error"),t.textContent=e,formulario.appendChild(t),setTimeout((()=>{t.remove()}),3e3)}}function consultarAPI(){const{moneda:e,cryptomoneda:t}=objBusqueda,o=`https://min-api.cryptocompare.com/data/pricemultifull?fsyms=${t}&tsyms=${e}`;mostrarSpinner(),fetch(o).then((e=>e.json())).then((o=>mostrarCotizacionHTML(o.DISPLAY[t][e])))}function mostrarCotizacionHTML(e){limpiarHTML();const{PRICE:t,HIGHDAY:o,LOWDAY:n,CHANGEPCT24HOUR:a,LASTUPDATE:r}=e,s=document.createElement("P");s.classList.add("precio"),s.innerHTML=`El pecio es: <span>${t}</span>`;const c=document.createElement("P");c.innerHTML=`<p>Precio mas alto del dia:<span>${o}<span/></p>`;const d=document.createElement("P");d.innerHTML=`<p>Precio mas bajo del dia:<span>${n}<span/></p>`;const i=document.createElement("P");i.innerHTML=`<p>Precio mas alto del dia:<span>${a}%<span/></p>`;const l=document.createElement("P");l.innerHTML=`<p>Ultima actualizacion del dia:<span>${r}<span/></p>`,resultado.appendChild(s),resultado.appendChild(c),resultado.appendChild(d),resultado.appendChild(i),resultado.appendChild(l)}function limpiarHTML(){for(;resultado.firstChild;)resultado.removeChild(resultado.firstChild)}function mostrarSpinner(){limpiarHTML();const e=document.createElement("DIV");e.classList.add("spinner"),e.innerHTML='\n        <div class="bounce1"></div>\n        <div class="bounce2"></div>\n        <div class="bounce3"></div>\n    ',resultado.appendChild(e)}document.addEventListener("DOMContentLoaded",(()=>{consultarCryptoMonedas(),formulario.addEventListener("submit",submitFormulario),cryptoSelect.addEventListener("change",leerValor),monedaSelect.addEventListener("change",leerValor)}));
//# sourceMappingURL=main.js.map
